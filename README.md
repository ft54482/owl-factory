# çŒ«å¤´é¹°å·¥å‚ (Owl Factory)

ä¸€ä¸ªä¸“ä¸ºAIæ™ºèƒ½è§†é¢‘åˆ†æå¹³å°ï¼Œé›†æˆå¤šå¹³å°è§†é¢‘è§£æã€GPUé›†ç¾¤ç®¡ç†ã€ä»»åŠ¡åˆ†å‘å’Œæ™ºèƒ½åˆ†æåŠŸèƒ½ã€‚

## ğŸš€ é¡¹ç›®æ¦‚è¿°

çŒ«å¤´é¹°å·¥å‚æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„AIè§†é¢‘åˆ†æå¹³å°ï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- **è§†é¢‘è§£æåˆ†æ**: æ”¯æŒå¤šå¹³å°è§†é¢‘å†…å®¹çš„æ™ºèƒ½åˆ†æ
- **GPUé›†ç¾¤ç®¡ç†**: åˆ†å¸ƒå¼GPUèµ„æºè°ƒåº¦å’Œç›‘æ§
- **ç”¨æˆ·ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†ç³»ç»Ÿ
- **æ•°æ®ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„åˆ†ææŠ¥å‘Š

## ğŸ“ é¡¹ç›®ç»“æ„

```
owl-factory/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡ (åŸ: åç«¯ç¨‹åº)
â”‚   â”œâ”€â”€ api/                # APIè·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ admin_routes.py # ç®¡ç†å‘˜è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth_routes.py  # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ gpu_routes.py   # GPUç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ log_routes.py   # æ—¥å¿—è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ recharge_routes.py # å……å€¼è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ user_routes.py  # ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â””â”€â”€ intelligent_analysis_api.py # æ™ºèƒ½åˆ†æAPI
â”‚   â”œâ”€â”€ config/             # é…ç½®æ¨¡å—
â”‚   â”‚   â””â”€â”€ supabase_config.py # Supabaseé…ç½®
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ scripts/            # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ main.py            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt   # Pythonä¾èµ–
â”‚   â””â”€â”€ Dockerfile         # Dockeré…ç½®
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨ (åŸ: å‰ç«¯é¡µé¢)
â”‚   â”œâ”€â”€ src/               # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/      # Reactä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ lib/          # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/     # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/        # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ App.tsx       # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.tsx      # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.css     # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.html        # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ package.json      # Node.jsä¾èµ–
â”‚   â”œâ”€â”€ vite.config.ts    # Viteé…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js # Tailwindé…ç½®
â”‚   â”œâ”€â”€ tsconfig.json     # TypeScripté…ç½®
â”‚   â””â”€â”€ Dockerfile        # Dockeré…ç½®
â”œâ”€â”€ gpu-cluster/           # GPUé›†ç¾¤ç®¡ç†
â”œâ”€â”€ nginx/                 # Nginxé…ç½®
â”œâ”€â”€ config/               # å…¨å±€é…ç½®
â”œâ”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ reports/              # åˆ†ææŠ¥å‘Š
â”œâ”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ PROJECT_STRUCTURE.md  # é¡¹ç›®ç»“æ„è¯´æ˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Python 3.11+**: ä¸»è¦å¼€å‘è¯­è¨€
- **FastAPI**: é«˜æ€§èƒ½Webæ¡†æ¶
- **Supabase**: æ•°æ®åº“å’Œè®¤è¯æœåŠ¡
- **Redis**: ç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ—
- **Whisper**: è¯­éŸ³è¯†åˆ«
- **PyTorch**: AIæ¨¡å‹æ¨ç†

### å‰ç«¯æŠ€æœ¯
- **React 18**: ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„JavaScript
- **Vite**: ç°ä»£åŒ–æ„å»ºå·¥å…·
- **Tailwind CSS**: å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Zustand**: è½»é‡çº§çŠ¶æ€ç®¡ç†

### åŸºç¡€è®¾æ–½
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **Nginx**: åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- **Prometheus**: ç›‘æ§æŒ‡æ ‡æ”¶é›†
- **Grafana**: ç›‘æ§é¢æ¿
- **Logstash**: æ—¥å¿—æ”¶é›†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- Node.js 18+ (å¼€å‘ç¯å¢ƒ)
- Python 3.11+ (å¼€å‘ç¯å¢ƒ)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/ft54482/owl-factory.git
cd owl-factory
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
nano .env
```

**é‡è¦é…ç½®é¡¹ï¼š**
- `SUPABASE_URL`: Supabaseé¡¹ç›®URL
- `SUPABASE_ANON_KEY`: SupabaseåŒ¿åå¯†é’¥
- `SUPABASE_SERVICE_ROLE_KEY`: SupabaseæœåŠ¡è§’è‰²å¯†é’¥
- `JWT_SECRET_KEY`: JWTç­¾åå¯†é’¥
- `GPU_SERVERS`: GPUæœåŠ¡å™¨é…ç½®

### 3. å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨Docker Composeå¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 4. è®¿é—®åº”ç”¨

- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯API**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **ç›‘æ§é¢æ¿**: http://localhost:3001 (Grafana)
- **æŒ‡æ ‡æ”¶é›†**: http://localhost:9090 (Prometheus)

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### åç«¯å¼€å‘

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### å‰ç«¯å¼€å‘

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½è§†é¢‘åˆ†æ

- **å•è§†é¢‘åˆ†æ**: ä¸Šä¼ è§†é¢‘æ–‡ä»¶è¿›è¡ŒAIåˆ†æ
- **è´¦å·å®Œæ•´åˆ†æ**: åˆ†ææ•´ä¸ªç¤¾äº¤åª’ä½“è´¦å·çš„å†…å®¹
- **å¤šå¹³å°æ”¯æŒ**: æŠ–éŸ³ã€å°çº¢ä¹¦ã€Bç«™ã€TikTokç­‰
- **å®æ—¶å¤„ç†**: GPUé›†ç¾¤åŠ é€Ÿçš„å®æ—¶åˆ†æ

### 2. GPUé›†ç¾¤ç®¡ç†

- **èµ„æºç›‘æ§**: å®æ—¶ç›‘æ§GPUä½¿ç”¨ç‡å’ŒçŠ¶æ€
- **ä»»åŠ¡è°ƒåº¦**: æ™ºèƒ½åˆ†é…è®¡ç®—ä»»åŠ¡åˆ°å¯ç”¨GPU
- **è´Ÿè½½å‡è¡¡**: è‡ªåŠ¨å¹³è¡¡é›†ç¾¤è´Ÿè½½
- **æ•…éšœæ¢å¤**: è‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤æ•…éšœèŠ‚ç‚¹

### 3. ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ

- **ç”¨æˆ·æ³¨å†Œ/ç™»å½•**: å®Œæ•´çš„è®¤è¯æµç¨‹
- **æƒé™ç®¡ç†**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å……å€¼ç³»ç»Ÿ**: ç”¨æˆ·ä½™é¢å’Œæ¶ˆè´¹ç®¡ç†
- **ä½¿ç”¨ç»Ÿè®¡**: è¯¦ç»†çš„ä½¿ç”¨è®°å½•å’Œç»Ÿè®¡

### 4. æ•°æ®åˆ†ææŠ¥å‘Š

- **è‡ªåŠ¨ç”Ÿæˆ**: AIè‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š
- **å¤šæ ¼å¼å¯¼å‡º**: PDFã€Excelã€JSONç­‰æ ¼å¼
- **å¯è§†åŒ–å›¾è¡¨**: ä¸°å¯Œçš„æ•°æ®å¯è§†åŒ–
- **å†å²è®°å½•**: å®Œæ•´çš„åˆ†æå†å²è¿½è¸ª

## ğŸ” å®‰å…¨ç‰¹æ€§

- **JWTè®¤è¯**: å®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
- **CORSä¿æŠ¤**: è·¨åŸŸè¯·æ±‚å®‰å…¨æ§åˆ¶
- **é€Ÿç‡é™åˆ¶**: APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- **SSL/TLS**: HTTPSå®‰å…¨ä¼ è¾“

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

- **åº”ç”¨ç›‘æ§**: Prometheus + Grafanaç›‘æ§é¢æ¿
- **æ—¥å¿—æ”¶é›†**: é›†ä¸­åŒ–æ—¥å¿—æ”¶é›†å’Œåˆ†æ
- **æ€§èƒ½æŒ‡æ ‡**: è¯¦ç»†çš„æ€§èƒ½ç›‘æ§æŒ‡æ ‡
- **å‘Šè­¦ç³»ç»Ÿ**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œå‘Šè­¦

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æœåŠ¡å™¨è¦æ±‚**:
   - CPU: 8æ ¸å¿ƒä»¥ä¸Š
   - å†…å­˜: 16GBä»¥ä¸Š
   - å­˜å‚¨: 500GBä»¥ä¸ŠSSD
   - GPU: NVIDIA GPU (å¯é€‰ï¼Œç”¨äºAIåŠ é€Ÿ)

2. **åŸŸåé…ç½®**:
   ```bash
   # é…ç½®åŸŸåè§£æ
   api.yourdomain.com -> æœåŠ¡å™¨IP
   app.yourdomain.com -> æœåŠ¡å™¨IP
   ```

3. **SSLè¯ä¹¦**:
   ```bash
   # ä½¿ç”¨Let's Encryptè·å–å…è´¹SSLè¯ä¹¦
   certbot --nginx -d api.yourdomain.com -d app.yourdomain.com
   ```

4. **ç¯å¢ƒå˜é‡é…ç½®**:
   ```bash
   # ç”Ÿäº§ç¯å¢ƒé…ç½®
   ENVIRONMENT=production
   DEBUG=false
   DOMAIN=yourdomain.com
   SSL_ENABLED=true
   ```

### Dockeréƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# æ‰©å±•å·¥ä½œè¿›ç¨‹
docker-compose up -d --scale task-worker=4

# æ›´æ–°æœåŠ¡
docker-compose pull
docker-compose up -d
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£å¯ä»¥åœ¨è¿è¡ŒæœåŠ¡åè®¿é—®ï¼š
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### ä¸»è¦APIç«¯ç‚¹

- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/analysis/video` - å•è§†é¢‘åˆ†æ
- `POST /api/analysis/account` - è´¦å·å®Œæ•´åˆ†æ
- `GET /api/gpu/status` - GPUé›†ç¾¤çŠ¶æ€
- `GET /api/reports/{report_id}` - è·å–åˆ†ææŠ¥å‘Š

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **DockeræœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ—¥å¿—
   docker-compose logs service_name
   
   # é‡å¯æœåŠ¡
   docker-compose restart service_name
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥Supabaseé…ç½®
   - éªŒè¯ç½‘ç»œè¿æ¥
   - ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®

3. **GPUä¸å¯ç”¨**
   - æ£€æŸ¥NVIDIAé©±åŠ¨
   - éªŒè¯CUDAå®‰è£…
   - ç¡®è®¤Docker GPUæ”¯æŒ

4. **å‰ç«¯æ„å»ºå¤±è´¥**
   ```bash
   # æ¸…ç†ç¼“å­˜
   npm cache clean --force
   rm -rf node_modules
   npm install
   ```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ç»´æŠ¤è€…**: ft54482
- **GitHub**: https://github.com/ft54482/owl-factory
- **é—®é¢˜åé¦ˆ**: https://github.com/ft54482/owl-factory/issues

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªä»ä¸­æ–‡æ–‡ä»¶å¤¹ç»“æ„è¿ç§»åˆ°è‹±æ–‡æ ‡å‡†ç»“æ„çš„é¡¹ç›®ã€‚åŸå§‹çš„ä¸­æ–‡æ–‡ä»¶å¤¹ï¼ˆ`çŒ«å¤´é¹°å·¥åœº/åç«¯ç¨‹åº` å’Œ `çŒ«å¤´é¹°å·¥åœº/å‰ç«¯é¡µé¢`ï¼‰å·²ç»é‡æ–°ç»„ç»‡ä¸ºæ ‡å‡†çš„è‹±æ–‡ç»“æ„ï¼ˆ`backend/` å’Œ `frontend/`ï¼‰ï¼Œä»¥ç¡®ä¿æ›´å¥½çš„è·¨å¹³å°å…¼å®¹æ€§å’Œå›½é™…åŒ–æ”¯æŒã€‚